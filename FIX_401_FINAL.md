# üîß –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 401 –æ—à–∏–±–æ–∫

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å

**401 Unauthorized** –∏ `execution id: null` –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è **–î–û** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏.

–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ Supabase Edge Functions.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ Supabase Edge Functions —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞.

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ service_role key (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í Edge Function –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `service_role` key –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞, –∞ –Ω–µ `anon` key.

**–ù–æ:** `service_role` key –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ —Å–µ–∫—Ä–µ—Ç –≤ Edge Function.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø—Ä–∞–≤—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

–ü—Ä–æ–±–ª–µ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `SUPABASE_URL` –∏ `SUPABASE_ANON_KEY` –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Edge Function.

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Edge Function

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Edge Function

1. Supabase ‚Üí Edge Functions ‚Üí `sync` ‚Üí **Code**

### 2. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 117)

### 3. –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é**

```typescript
// –ü–æ–ª—É—á–∞–µ–º URL –∏ –∫–ª—é—á –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Supabase
// –≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Edge Functions
const supabaseUrl = Deno.env.get("SUPABASE_URL") || "";
const supabaseAnonKey = Deno.env.get("SUPABASE_ANON_KEY") || "";

// –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é
const url = supabaseUrl || "https://zhchkxukgltknfbropqu.supabase.co";
const key = supabaseAnonKey || "sb_publishable_m96BQEXNJw5_L_CI0kQkUg_0vdPodFS";

const supabaseClient = createClient(url, key);
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å service_role key (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)**

```typescript
// –ü–æ–ª—É—á–∞–µ–º service_role key –∏–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤
const serviceRoleKey = Deno.env.get("SUPABASE_SERVICE_ROLE_KEY") || Deno.env.get("SUPABASE_ANON_KEY") || "";

const supabaseClient = createClient(
  Deno.env.get("SUPABASE_URL") || "https://zhchkxukgltknfbropqu.supabase.co",
  serviceRoleKey
);
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–¥–ª—è —Ç–µ—Å—Ç–∞)**

```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è —Ç–µ—Å—Ç–∞
const supabaseClient = createClient(
  "https://zhchkxukgltknfbropqu.supabase.co",
  "sb_publishable_m96BQEXNJw5_L_CI0kQkUg_0vdPodFS"
);
```

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–í–∞—Ä–∏–∞–Ω—Ç A** ‚Äî –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–æ –∏–º–µ–µ—Ç fallback –Ω–∞ –ø—Ä—è–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

Supabase Edge Functions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç:
- `SUPABASE_URL`
- `SUPABASE_ANON_KEY`

–ù–æ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é.

---

## üß™ –¢–µ—Å—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –û–±–Ω–æ–≤–∏—Ç–µ Edge Function
2. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Invocations ‚Äî –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 200 OK
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã ‚Äî –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –¥–∞–Ω–Ω—ã–µ

---

## ‚ùì –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω –∫–æ–¥?
2. ‚úÖ –ó–∞–¥–µ–ø–ª–æ–µ–Ω–∞ –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è?
3. ‚úÖ –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö?

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `service_role` key –≤–º–µ—Å—Ç–æ `anon` key –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –≤–Ω—É—Ç—Ä–∏ Edge Function.
