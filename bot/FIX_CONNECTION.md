# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram API

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:

–ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `api.telegram.org`:
```
polling_error: EFATAL: Error: getaddrinfo ENOTFOUND api.telegram.org
```

---

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞**
2. **VPN –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ Telegram**
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å DNS**
4. **Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è:

### –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

```bash
ping -c 3 8.8.8.8
```

–ï—Å–ª–∏ –Ω–µ –ø–∏–Ω–≥—É–µ—Ç—Å—è ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º.

---

### –†–µ—à–µ–Ω–∏–µ 2: –û—Ç–∫–ª—é—á–∏—Ç–µ VPN

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ VPN:
1. –û—Ç–∫–ª—é—á–∏—Ç–µ VPN
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

---

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ Telegram –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)

–ï—Å–ª–∏ Telegram –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω–µ, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏.

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

1. –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ–∫—Å–∏ (SOCKS5 –∏–ª–∏ HTTP)
2. –û–±–Ω–æ–≤–∏—Ç–µ `bot/index.js`:

```javascript
import "dotenv/config";
import TelegramBot from "node-telegram-bot-api";
import { SocksProxyAgent } from 'socks-proxy-agent';

const proxyUrl = process.env.PROXY_URL; // –Ω–∞–ø—Ä–∏–º–µ—Ä: socks5://127.0.0.1:1080
const agent = proxyUrl ? new SocksProxyAgent(proxyUrl) : undefined;

const bot = new TelegramBot(process.env.BOT_TOKEN, { 
  polling: true,
  request: {
    agent: agent
  }
});
```

3. –î–æ–±–∞–≤—å—Ç–µ –≤ `bot/.env`:
```
PROXY_URL=socks5://127.0.0.1:1080
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç:
```bash
cd /Users/mansurusupov/tg-finance-miniapp/bot
npm install socks-proxy-agent
```

---

### –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS

```bash
nslookup api.telegram.org
```

–ï—Å–ª–∏ –Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å DNS.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Google DNS: `8.8.8.8` –∏ `8.8.4.4`
2. –ò–ª–∏ Cloudflare DNS: `1.1.1.1` –∏ `1.0.0.1`

---

### –†–µ—à–µ–Ω–∏–µ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Firewall

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Firewall –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí Firewall
2. –†–∞–∑—Ä–µ—à–∏—Ç–µ Node.js –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–∏

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Telegram API

```bash
curl https://api.telegram.org/bot7568002456:AAFpZOYNjGXbYxaeZ-fdQwliyCApbpZ7B3A/getMe
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –±–æ—Ç–µ.

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

```bash
ping api.telegram.org
```

–î–æ–ª–∂–µ–Ω –ø–∏–Ω–≥–æ–≤–∞—Ç—å—Å—è.

---

## üöÄ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   cd /Users/mansurusupov/tg-finance-miniapp/bot
   node index.js
   ```

2. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω
   üì± Web App URL: https://yusupov7274-oss.github.io/tg-finance-miniapp/
   Bot is running...
   ```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞ (–µ—Å–ª–∏ polling –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

–ï—Å–ª–∏ polling –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook (—Ç—Ä–µ–±—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL).

–ù–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –≤—ã—à–µ.
